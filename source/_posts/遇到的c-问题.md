---
title: 遇到的c++问题
date: 2018-10-15 20:56:38
tags:
  - c++
---

本文主要记录本人在写c++时遇到的一些坑和问题。

<!-- more -->

### 1.头文件string.h、cstring、string之间的区别

**<string.h>**是C中的头文件，包含比如strcpy、strcat之类的字符串处理函数。

**<cstring>**是C++中的string.h。

**<string>**是C++标准定义的头文件，定义了一个string的字符串类。

所以**<string.h>**和**<cstring>**其实是一个东西，但它们跟**<string>**完全不是一个东西。

### 2.memset的正确用法

需要的头文件：在C中 <string.h>，在C++中<string>。

void *memset(void *s,int c,size_t n) 将已开辟内存空间 s 的首 **n 个字节**的值设为值 c 。

举例：

1.初始化或者清空一个字符数组。

```c++
char a[10];
memset(a,'\0',sizeof(a));
```

2.为一个字符数组赋值。

```c++
char a[11];
memset(a,'1',sizeof(a)-1);//为终止字符'\0'留一个空间
//输出：1111111111
```

3.为一个整型数组赋值。

```c++
int a[10];
memset(a,1,sizeof(a));
```

以为数组a中所有的元素都会变为1，｛1,1,1,1,1,1,1,1,1,1｝，但并不是这样。实际输出是｛16843009,16843009,...,16843009｝。

原因就在于：memset是逐字节赋值的，而一个int是4个字节

上面代码运行后，一个int会变为：0000 0001 0000 0001 0000 0001 0000 0001。（一个字节8位）这个值换算为十进制就是 16843009。所以这样的操作会失败。

所以，在memset使用时要千万小心，在给char以外的数组赋值时，只能初始化为0或者-1。因为在计算机里，0的二进制都是0，-1的二进制都是1。